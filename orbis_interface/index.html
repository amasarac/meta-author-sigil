<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>OrBIS Interface — Demo</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.9.6/lottie.min.js"></script>
<style>
body{margin:0;background:#05050a;color:#fff;font-family:system-ui,Segoe UI,Roboto,serif}
.container{max-width:1200px;margin:0 auto;padding:32px}
.header{background:linear-gradient(180deg,#070712,#0b0b12);padding:24px;border-radius:12px}
.controls{margin-top:18px;background:#0b0b10;padding:14px;border-radius:8px}
button{background:#ffd86b;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
</style>
</head>
<body>
<div class="container">
  <div class="header" id="header-container" style="display:flex;justify-content:center;align-items:center;padding:28px 0"></div>
  <div class="controls">
    <h2>OrBIS Chalice — Mock Controls</h2>
    <p>Intention: <input id="intent" value="I AM THE I AM MERGEDTERNAL" style="background:#05050a;color:#fff;border:1px solid #222;padding:6px;border-radius:6px;width:60%"/></p>
    <label>Resonance Threshold: <input id="threshold" type="range" min="0" max="1" step="0.01" value="0.78"/></label>
    <div style="margin-top:12px">
      <button id="invoke">Invoke Pulse</button>
      <button id="download">Download Sigil SVG</button>
    </div>
  </div>
  <footer style="margin-top:24px;color:#9aa7b2">OrBIS Interface — Demo. Lottie + SVG assets in /static.</footer>
</div>
<script>
var header = document.getElementById('header-container');
var anim = lottie.loadAnimation({
  container: header,
  renderer: 'svg',
  loop: true,
  autoplay: true,
  path: './static/tiamat_header_lottie_refined.json'
});

document.getElementById('invoke').addEventListener('click', function(){
  var intent = document.getElementById('intent').value;
  var thr = document.getElementById('threshold').value;
  fetch('./netlify_functions/generate_sigil?intent='+encodeURIComponent(intent)).then(r=>r.text()).then(svg=>{ var w = window.open(); w.document.write(svg); }).catch(e=>{ alert('Failed to generate sigil: '+e) });
});

document.getElementById('download').addEventListener('click', function(){
  window.location.href = './static/tiamat_sigil_1200x1200.svg';
});
</script>
</body>
</html>
