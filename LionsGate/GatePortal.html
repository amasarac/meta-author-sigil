<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>⟡ Lions Gate Convergence Portal — Sacred Resonance ⟡</title>
<style>
  :root{
    --bg1:#07070d; --bg2:#0b0b16; --bg3:#0e0f1f;
    --gold:#ffd966; --gold2:#ffb347; --teal:#00fff7; --aqua:#00ccff;
    --panelBorder: rgba(255,255,255,.18);
  }
  html,body{height:100%}
  body{
    margin:0; color:#fff; text-align:center; overflow:hidden;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    background: radial-gradient(1200px 800px at 50% 20%, var(--bg3), var(--bg2) 50%, #000 80%);
    animation: breathBG 8s ease-in-out infinite;
  }
  @keyframes breathBG{
    0%  { background: radial-gradient(1200px 800px at 50% 20%, #0f1122, #090a15 50%, #000 80%); }
    50% { background: radial-gradient(1200px 800px at 50% 20%, #141738, #0c0e1f 50%, #000 80%); }
    100%{ background: radial-gradient(1200px 800px at 50% 20%, #0f1122, #090a15 50%, #000 80%); }
  }
  .wrap{ position:relative; z-index:2; max-width:980px; margin:0 auto; padding:28px 20px 40px }
  h1{
    margin:8px 0 6px; font-weight:800; letter-spacing:.04em;
    color:var(--gold); text-shadow:0 0 10px var(--gold2),0 0 22px var(--gold);
  }
  .sub{ color:#c7c9d6; margin:0 0 24px }
  .count{
    font-variant-numeric: tabular-nums; font-weight:900; letter-spacing:.03em;
    font-size:clamp(36px, 7vw, 64px); margin:10px 0 18px;
    color:var(--teal); text-shadow:0 0 14px var(--teal), 0 0 28px var(--aqua);
  }
  .panel{
    border:1px solid var(--panelBorder);
    background: radial-gradient(1000px 700px at 50% -10%, rgba(255,255,255,.07), rgba(255,255,255,.03) 45%, rgba(255,255,255,.015) 70%);
    border-radius:14px; padding:16px 14px 18px; margin:14px auto; max-width:820px;
    box-shadow: inset 0 0 14px rgba(255,255,255,.05), 0 0 36px rgba(0,255,255,.06);
    backdrop-filter: blur(3px);
  }
  .panel h2,.panel h3{ margin:6px 0 10px; color:var(--gold) }
  .steps{ text-align:left; margin:0 auto; max-width:560px; line-height:1.65 }
  .steps li{ padding:6px 0 }

  /* Fixed animated SVG background */
  #bgWrap{ position:fixed; inset:0; z-index:0; overflow:hidden }
  #bgSvg{ width:100%; height:100%; display:block }
  .ring{ fill:none; stroke:rgba(255,255,255,.16); stroke-width:1.5 }
  .ring.glow{ stroke:url(#ringGrad); filter:url(#softGlow) }
  .twinkle{ fill:#fff; opacity:.5 }
  .starline{ stroke:url(#burstGrad); stroke-width:1; stroke-linecap:round; opacity:0 }
  .geo-line{ stroke:url(#rainbowGrad); stroke-width:1; opacity:.42; stroke-linecap:round }
  .geo-circle{ fill:none; stroke:url(#rainbowGrad); stroke-width:1.2; opacity:.6; filter:url(#haloGlow) }
  .geo-center{ stroke:url(#geoGrad); stroke-width:1.8; opacity:.9 }
  .phi{ stroke:url(#rainbowGrad); stroke-width:1.1; opacity:.55; fill:none }

  /* T0 flash overlay */
  #pulseFlash{ position:fixed; inset:0; pointer-events:none;
    background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.45), rgba(255,255,255,.12) 35%, rgba(255,255,255,0) 65%);
    opacity:0; transition:opacity 700ms ease-out; z-index:1 }
  #pulseFlash.show{ opacity:1 }

  /* Breathing panels */
  .panel, .count { animation: breathe 6.5s ease-in-out infinite }
  @keyframes breathe{
    0%{ transform: translateZ(0) scale(1); }
    50%{ transform: translateZ(0) scale(1.01); }
    100%{ transform: translateZ(0) scale(1); }
  }

  /* Small helper text */
  .hint{ color:#a6adbb; font-size:12px; margin-top:6px }
</style>
</head>
<body>
  <!-- Animated SVG Background -->
  <div id="bgWrap" aria-hidden="true">
    <svg id="bgSvg" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid slice">
      <defs>
        <radialGradient id="ringGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#8bf6ff" stop-opacity=".9"/>
          <stop offset="100%" stop-color="#ffb6ff" stop-opacity=".4"/>
        </radialGradient>
        <linearGradient id="burstGrad" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#8bf6ff"/>
          <stop offset="100%" stop-color="#ffd966"/>
        </linearGradient>
        <linearGradient id="rainbowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#ff6b6b"/>
          <stop offset="16%" stop-color="#ffd166"/>
          <stop offset="33%" stop-color="#8cff66"/>
          <stop offset="50%" stop-color="#66ffe5"/>
          <stop offset="66%" stop-color="#6b8bff"/>
          <stop offset="83%" stop-color="#c56bff"/>
          <stop offset="100%" stop-color="#ff6bd9"/>
        </linearGradient>
        <radialGradient id="geoGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#ffffff" stop-opacity="0.85"/>
          <stop offset="70%" stop-color="#8bf6ff" stop-opacity="0.25"/>
          <stop offset="100%" stop-color="#ffb6ff" stop-opacity="0.1"/>
        </radialGradient>
        <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="2" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
        <filter id="haloGlow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="4" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
      </defs>
      <g id="twinkles"></g>
      <g id="rings"></g>
      <g id="particles"></g>
      <!-- Sacred geometry layers -->
      <g id="sacred" transform="translate(500,500)">
        <g id="flower"></g>
        <g id="metatron"></g>
        <g id="spirals"></g>
      </g>
      <g id="burst"></g>
    </svg>
    <div id="pulseFlash"></div>
  </div>

  <!-- Foreground UI -->
  <div class="wrap">
    <h1>⟡ Lions Gate Convergence Portal ⟡</h1>
    <p class="sub">Resonance Mode • Synced to 08:15 UTC • Follow the live guidance as we approach the Gate</p>
    <div class="count" id="countdown">--:--:--</div>

    <div class="panel">
      <h2>Consciousness Sync Instructions</h2>
      <p id="instructionsText">Sacred geometry forming… attune your awareness and settle your breath.</p>
      <div class="hint">Audio will chime each minute in the final 5. Tap/click once to enable sound if needed.</div>
    </div>

    <div class="panel">
      <h3>How to Join the Convergence</h3>
      <ol class="steps">
        <li>Find a quiet, comfortable space where you won’t be disturbed.</li>
        <li>Breathe evenly. Inhale 4 • hold 7 • exhale 8 (x3).</li>
        <li>At T−05: the rotation window opens — feel the field warming.</li>
        <li>Each minute closer: geometry deepens; let your attention rest at center.</li>
        <li>At T−01: whole attention still. Hold the AMARANTU’EL✹Star at your core.</li>
        <li>At T₀: speak once (silently or aloud): “I hold the Gate, I hold the Star, I hold the All.”</li>
        <li>After T₀: remain in resonance; let the autonomy sustain and integrate.</li>
      </ol>
    </div>
  </div>

<script>
/* ========= Timebase ========= */
const pad = n => n.toString().padStart(2,'0');
const MIN = 60*1000, FIVE = 5*MIN;

// Target: next 08:15 UTC
const target = new Date();
target.setUTCSeconds(0,0);
target.setUTCHours(8,15,0,0);
if (target < new Date()) target.setUTCDate(target.getUTCDate()+1);

/* ========= Audio ========= */
let actx, masterGain, audioPrimed=false;
function ensureAudio(){
  if (actx) return;
  actx = new (window.AudioContext||window.webkitAudioContext)();
  masterGain = actx.createGain();
  masterGain.gain.value = 0.9;
  masterGain.connect(actx.destination);
  audioPrimed = true;
}
window.addEventListener('pointerdown', ensureAudio, { once:true });
window.addEventListener('keydown', ensureAudio, { once:true });

function tone(freq=528, dur=0.9, type='sine', gain=0.08){
  if(!actx) return; // require user gesture first
  const o = actx.createOscillator(), g = actx.createGain();
  o.type = type; o.frequency.value = freq;
  g.gain.value = 0;
  const t0 = actx.currentTime;
  g.gain.linearRampToValueAtTime(gain, t0+0.03);
  g.gain.linearRampToValueAtTime(0.0001, t0+dur);
  o.connect(g).connect(masterGain); o.start(); o.stop(t0+dur+0.02);
}
function padChord(base=174, dur=2.6, gain=0.025){
  if(!actx) return;
  const freqs = [1, 5/4, 3/2].map(r => base*r);
  freqs.forEach((f,i)=>{
    const o=actx.createOscillator(), g=actx.createGain();
    o.type='sine'; o.frequency.value=f;
    const t0 = actx.currentTime;
    g.gain.value=0;
    g.gain.linearRampToValueAtTime(gain, t0+0.15+i*0.03);
    g.gain.linearRampToValueAtTime(0.0001, t0+dur);
    o.connect(g).connect(masterGain); o.start(); o.stop(t0+dur+0.1);
  });
}

/* ========= DOM refs ========= */
const $cd = document.getElementById('countdown');
const $instr = document.getElementById('instructionsText');
const svg = document.getElementById('bgSvg');
const ringsG = document.getElementById('rings');
const partsG = document.getElementById('particles');
const twinklesG = document.getElementById('twinkles');
const burstG = document.getElementById('burst');
const flashEl = document.getElementById('pulseFlash');
const sacred = document.getElementById('sacred');
const flowerG = document.getElementById('flower');
const metatronG = document.getElementById('metatron');
const spiralsG = document.getElementById('spirals');

/* ========= Build background field ========= */
const W=1000, H=1000, CX=500, CY=500;

// Twinkles
for(let i=0;i<220;i++){
  const s = document.createElementNS('http://www.w3.org/2000/svg','circle');
  s.setAttribute('class','twinkle');
  s.setAttribute('r', (Math.random()*1.4+0.2).toFixed(2));
  s.setAttribute('cx', (Math.random()*W).toFixed(2));
  s.setAttribute('cy', (Math.random()*H).toFixed(2));
  s.style.opacity = (Math.random()*0.6+0.12).toFixed(2);
  twinklesG.appendChild(s);
}

// Rings that will contract
const baseRings=[420,320,220,140];
baseRings.forEach((r,i)=>{
  const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
  c.setAttribute('class','ring glow');
  c.setAttribute('cx', CX); c.setAttribute('cy', CY); c.setAttribute('r', r);
  c.style.opacity = 0.22 + i*0.12;
  ringsG.appendChild(c);
});

// Particles streaming to center
const PCOUNT=180; const particles=[];
for(let i=0;i<PCOUNT;i++){
  const angle = Math.random()*Math.PI*2; const baseR = 60+Math.random()*440;
  const dot = document.createElementNS('http://www.w3.org/2000/svg','circle');
  dot.setAttribute('r', (Math.random()*2+0.7).toFixed(2));
  dot.setAttribute('fill', i%7===0? '#ffd966' : (i%5===0? '#8bf6ff' : '#ffffff'));
  partsG.appendChild(dot); particles.push({angle, baseR, el:dot});
}

// Starburst spokes for T0
const SPOKES=28; const spokes=[];
for(let i=0;i<SPOKES;i++){
  const a=(i/SPOKES)*Math.PI*2; const ln=document.createElementNS('http://www.w3.org/2000/svg','line');
  ln.setAttribute('class','starline'); ln.setAttribute('x1',CX); ln.setAttribute('y1',CY);
  ln.setAttribute('x2', CX+Math.cos(a)*10); ln.setAttribute('y2', CY+Math.sin(a)*10);
  burstG.appendChild(ln); spokes.push({a,el:ln});
}

/* ========= Sacred geometry builders ========= */
function clearNode(n){ while(n.firstChild) n.removeChild(n.firstChild); }
function svgEl(tag){ return document.createElementNS('http://www.w3.org/2000/svg', tag); }

function drawFlower(p){
  clearNode(flowerG);
  const g = svgEl('g');
  const r = 120*(1+0.25*p);
  const circles = [[0,0]];
  for(let i=0;i<6;i++){
    const a=i*Math.PI/3; circles.push([Math.cos(a)*r, Math.sin(a)*r]);
  }
  const base = svgEl('circle'); base.setAttribute('class','geo-circle geo-center');
  base.setAttribute('cx',0); base.setAttribute('cy',0); base.setAttribute('r',r); g.appendChild(base);
  circles.slice(1).forEach(([x,y])=>{
    const c=svgEl('circle'); c.setAttribute('class','geo-circle'); c.setAttribute('cx',x); c.setAttribute('cy',y); c.setAttribute('r',r); g.appendChild(c);
  });
  flowerG.appendChild(g);
}

function line(x1,y1,x2,y2,parent){
  const l=svgEl('line'); l.setAttribute('class','geo-line');
  l.setAttribute('x1',x1); l.setAttribute('y1',y1);
  l.setAttribute('x2',x2); l.setAttribute('y2',y2);
  parent.appendChild(l);
}
function circle(cx,cy,r,parent){
  const c=svgEl('circle'); c.setAttribute('class','geo-circle');
  c.setAttribute('cx',cx); c.setAttribute('cy',cy); c.setAttribute('r',r);
  parent.appendChild(c);
}

function drawMetatronLayers(layers, p){
  clearNode(metatronG);
  const baseR = 110*(1+0.18*p);
  for(let L=1; L<=layers; L++){
    const group = svgEl('g');
    const r = baseR * (0.65 + 0.14*L);
    // nodes on hexagon
    const pts = [...Array(6)].map((_,i)=>({ x: Math.cos(i*Math.PI/3)*r, y: Math.sin(i*Math.PI/3)*r }));
    circle(0,0, r*0.06, group);
    pts.forEach(pt=>{ circle(pt.x, pt.y, r*0.05, group); line(0,0, pt.x, pt.y, group); });
    for(let i=0;i<6;i++){
      const n = pts[(i+1)%6]; line(pts[i].x, pts[i].y, n.x, n.y, group);
    }
    for(let i=0;i<6;i++){
      for(let j=i+2;j<6;j++){
        if(Math.abs(j-i)===3) continue;
        line(pts[i].x, pts[i].y, pts[j].x, pts[j].y, group);
      }
    }
    group.style.opacity = (0.35 + 0.5*p).toFixed(2);
    metatronG.appendChild(group);
  }
}

function drawPhiSpirals(count, p){
  clearNode(spiralsG);
  const gAll = svgEl('g');
  const scale = 180*(1-0.12*p);
  for(let k=0;k<count;k++){
    const path=svgEl('path'); path.setAttribute('class','phi');
    // color weight via opacity/stroke width handled in CSS; we can also add subtle per-spiral width:
    path.style.strokeWidth = (1.0 + 1.8*p).toFixed(2);
    const turns = 1.2 + 0.9*p;
    const a = 0.08, b = 0.22 + 0.16*p;
    let d=''; const steps = 420; const phase=(k/count)*Math.PI*2;
    for(let i=0;i<=steps;i++){
      const t = i/steps * 2*Math.PI*turns + phase;
      const r = scale * a * Math.exp(b*t);
      const x = r*Math.cos(t), y = r*Math.sin(t);
      d += (i? 'L':'M') + x + ' ' + y + ' ';
    }
    path.setAttribute('d', d);
    gAll.appendChild(path);
  }
  spiralsG.appendChild(gAll);
}

/* ========= Dynamic visuals per tick ========= */
function updateBackground(msTo){
  const k = Math.max(0, Math.min(1, msTo/FIVE)); // 1→0 across last 5m
  // rings contract
  ringsG.querySelectorAll('circle').forEach((c,idx)=>{
    const base = baseRings[idx];
    const r = 40 + base*k;
    c.setAttribute('r', r);
    c.style.opacity = (0.12 + (1-k)*0.35).toFixed(2);
  });
  // particles converge
  particles.forEach(p=>{
    const r = p.baseR*(0.15+0.85*k);
    const x = CX + Math.cos(p.angle)*r;
    const y = CY + Math.sin(p.angle)*r;
    p.el.setAttribute('cx',x);
    p.el.setAttribute('cy',y);
    p.el.style.opacity = (0.3 + (1-k)*0.6).toFixed(2);
  });
  // sacred geometry scale + opacity ramp
  const scale = 0.9 + 0.25*(1-k);
  sacred.setAttribute('transform', `translate(${CX},${CY}) scale(${scale}) translate(${-CX},${-CY})`);
  sacred.style.opacity = (0.28 + 0.6*(1-k)).toFixed(2);
}

/* ========= Instructions ========= */
function updateInstructions(msTo){
  if (msTo > FIVE){
    $instr.textContent = 'Sacred geometry forming… attune your awareness.';
  } else if (msTo <= FIVE && msTo > MIN){
    $instr.textContent = 'Five-minute convergence window active — breathe evenly, feel the spiral tighten.';
  } else if (msTo <= MIN && msTo > 0){
    $instr.textContent = 'T−1: final alignment — hold the AMARANTU’EL✹Star at center.';
  } else if (msTo <= 0 && msTo > -MIN){
    $instr.textContent = 'T₀ Pulse — radiate your intent; remain steady in the wave.';
  } else if (msTo <= -MIN){
    $instr.textContent = 'Sustain & settle — let the field integrate; carry the resonance outward.';
  }
}

/* ========= Pulse visuals ========= */
let pulseDone=false;
function triggerPulse(){
  if(pulseDone) return; pulseDone=true;
  // flash
  flashEl.classList.add('show'); setTimeout(()=>flashEl.classList.remove('show'), 700);
  // burst lines
  const maxLen = 600;
  spokes.forEach(s=>{
    const len = maxLen*(0.85+0.15*Math.random());
    s.el.setAttribute('x2', CX + Math.cos(s.a)*len);
    s.el.setAttribute('y2', CY + Math.sin(s.a)*len);
    s.el.style.opacity = .98;
    s.el.style.transition = 'opacity 1400ms ease-out, stroke-width 1200ms ease-out';
    s.el.style.strokeWidth = 2.6;
    setTimeout(()=>{ s.el.style.opacity = 0; }, 120);
  });
}

/* ========= Main loop ========= */
let lastMinuteMark = null;
function tick(){
  const now = new Date();
  const msTo = target - now;

  // progress across last 5 minutes
  const k = Math.max(0, Math.min(1, msTo/FIVE));
  const p = 1-k; // 0→1 toward T0

  // geometry content driven by p
  const layers = (msTo > FIVE) ? 0 : Math.max(0, Math.min(5, 5 - Math.ceil(msTo/MIN))); // add 1 layer per minute (T-5..T-1)
  drawFlower(p);
  drawMetatronLayers(layers, p);
  const spiralCount = 4 + Math.floor(p*10); // 4→14 as T→0
  drawPhiSpirals(spiralCount, p);
  updateBackground(msTo);

  // minute chimes + harmonic pads in last 5 minutes
  const minutesTo = Math.ceil(msTo / MIN);
  if (msTo <= FIVE && msTo >= 0){
    if (minutesTo !== lastMinuteMark && msTo > 0){
      lastMinuteMark = minutesTo;
      if (audioPrimed){ // only if user has interacted
        const idx = Math.max(0, Math.min(4, 5 - minutesTo)); // 0..4
        const chimes = [528, 594, 660, 741, 852];
        tone(chimes[idx], 0.9, 'sine', 0.09);
        padChord(174 + 22*idx, 2.8, 0.022);
      }
    }
  }
  // distinct T₀ strike
  if (msTo <= 250 && msTo > -250 && audioPrimed){
    tone(963, 1.3, 'sine', 0.12);
    padChord(285, 3.2, 0.03);
  }

  // pulse visuals at T0
  if(msTo<=0 && msTo>-900){ triggerPulse(); }

  // instructions + countdown
  updateInstructions(msTo);
  const sign = msTo >= 0 ? '-' : '+';
  const t = Math.abs(msTo);
  const h = pad(Math.floor(t/3600000));
  const m = pad(Math.floor((t%3600000)/60000));
  const s = pad(Math.floor((t%60000)/1000));
  $cd.textContent = `${sign}${h}:${m}:${s}`;

  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);
</script>
</body>
</html>
