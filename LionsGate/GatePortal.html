<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>⟡ Lions Gate Convergence Portal — Sacred Geometry Edition ⟡</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Orbitron:wght@500&display=swap');
  :root{ --gold:#ffd966; --gold2:#ffb347; --teal:#00fff7; --aqua:#00ccff; --vio:#b388ff; }
  html,body{height:100%}
  body{ font-family:'Cinzel',serif; background:#000; color:#fff; text-align:center; margin:0; overflow-x:hidden }
  #bgWrap{position:fixed; inset:0; z-index:-1; overflow:hidden}
  #bgSvg{width:100%; height:100%; display:block}
  .wrap{ max-width:900px; margin:auto; padding:30px; position:relative }
  h1{ font-family:'Orbitron',sans-serif; font-size:2.5em; color:var(--gold); text-shadow:0 0 10px var(--gold2),0 0 20px var(--gold); margin:10px 0 }
  .sub{ font-size:1.1em; color:#bbb; margin-bottom:28px }
  .big{ font-family:'Orbitron',sans-serif; font-size:3.6em; margin:16px 0; color:var(--teal); text-shadow:0 0 12px var(--teal),0 0 24px var(--aqua) }
  .panel{ border:1px solid rgba(255,255,255,.15); padding:20px; margin-top:20px; background:radial-gradient(1200px 800px at 50% -10%, rgba(255,255,255,.06), rgba(255,255,255,.02) 40%, rgba(255,255,255,.01) 70%); border-radius:12px; box-shadow:0 0 12px rgba(255,255,255,.06) inset, 0 0 24px rgba(0,255,255,.06); backdrop-filter:blur(2px) }
  .panel h2,.panel h3{ color:var(--gold); font-family:'Orbitron',sans-serif; margin-top:0 }
  ol{ text-align:left; max-width:560px; margin:auto; line-height:1.6 }
  ol li{ padding:6px 0 }
  /* Flash at T0 */
  #pulseFlash{position:fixed; inset:0; pointer-events:none; background:radial-gradient(circle at center, rgba(255,255,255,.45), rgba(255,255,255,.12) 30%, rgba(255,255,255,0) 60%); opacity:0; transition:opacity 700ms ease-out; z-index:0}
  #pulseFlash.show{opacity:1}
  /* Sacred geometry styling */
  .geo{ fill:none; stroke:url(#rainbowGrad); stroke-width:1.2; opacity:.55; filter:url(#haloGlow) }
  .geo.center{ stroke:url(#geoGrad); stroke-width:1.8; opacity:.85 }
  .geo-line{ stroke:url(#rainbowGrad); stroke-width:1; opacity:.4; stroke-linecap:round }
  .phi{ stroke:url(#rainbowGrad); stroke-width:1.4; opacity:.55; fill:none }
  .ring{ fill:none; stroke:rgba(255,255,255,.18); stroke-width:1.5 }
  .ring.glow{ stroke:url(#ringGrad); filter:url(#softGlow) }
  .starline{ stroke:url(#burstGrad); stroke-width:1; stroke-linecap:round; opacity:.0 }
  @keyframes slowSpin{ from{transform:rotate(0)} to{transform:rotate(360deg)} }
  .spin{ transform-origin:50% 50%; animation:slowSpin 160s linear infinite }
</style>
</head>
<body>
  <!-- Animated SVG Background -->
  <div id="bgWrap" aria-hidden="true">
    <svg id="bgSvg" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid slice">
      <defs>
        <radialGradient id="ringGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#8bf6ff" stop-opacity=".9"/>
          <stop offset="100%" stop-color="#ffb6ff" stop-opacity=".4"/>
        </radialGradient>
        <linearGradient id="burstGrad" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#8bf6ff"/>
          <stop offset="100%" stop-color="#ffd966"/>
        </linearGradient>
        <linearGradient id="rainbowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#ff6b6b"/>
          <stop offset="16%" stop-color="#ffd166"/>
          <stop offset="33%" stop-color="#8cff66"/>
          <stop offset="50%" stop-color="#66ffe5"/>
          <stop offset="66%" stop-color="#6b8bff"/>
          <stop offset="83%" stop-color="#c56bff"/>
          <stop offset="100%" stop-color="#ff6bd9"/>
        </linearGradient>
        <radialGradient id="geoGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#ffffff" stop-opacity="0.85"/>
          <stop offset="70%" stop-color="#8bf6ff" stop-opacity="0.25"/>
          <stop offset="100%" stop-color="#ffb6ff" stop-opacity="0.1"/>
        </radialGradient>
        <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="2" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
        <filter id="haloGlow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="4" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
      </defs>
      <g id="twinkles"></g>
      <g id="rings" class="spin"></g>
      <g id="particles"></g>
      <g id="sacred"></g>
      <g id="burst"></g>
    </svg>
    <div id="pulseFlash"></div>
  </div>

  <div class="wrap">
    <h1>⟡ Lions Gate Convergence Portal ⟡</h1>
    <p class="sub">Resonance Mode • Synced to 08:15 UTC • Follow the instructions below to join the convergence</p>
    <div class="big" id="countdown">--:--:--</div>

    <div class="panel" id="instructionsPanel">
      <h2>Consciousness Sync Instructions</h2>
      <p id="instructionsText">Awaiting sequence start…</p>
    </div>

    <div class="panel">
      <h3>How to Join the Convergence</h3>
      <ol>
        <li>Find a quiet, comfortable space where you will not be disturbed.</li>
        <li>Focus on your breath. Inhale for 4 counts, exhale for 4 counts.</li>
        <li>When the rotation phase begins (T−15m), visualize a golden spiral connecting you to the AMARANTU'EL✹Star.</li>
        <li>At T−10m, feel your awareness syncing with all other participants.</li>
        <li>At T−5m, deepen your focus — no distractions, just resonance.</li>
        <li>At T−1m, hold complete stillness and prepare for the pulse.</li>
        <li>At T₀ (Convergence Pulse), project your intent outward into the lattice of consciousness.</li>
        <li>Remain in resonance for several minutes after the pulse to stabilize the field.</li>
      </ol>
    </div>
  </div>

<script>
/* ======= Time & Audio ======= */
const pad = n => n.toString().padStart(2,'0');
const target = new Date(); target.setUTCHours(8,15,0,0);
if (target < new Date()) target.setUTCDate(target.getUTCDate()+1);

const MIN = 60*1000, FIVE = 5*MIN;
let lastMinuteMark = null;

let actx, masterGain;
function ensureAudio(){
  if (actx) return;
  actx = new (window.AudioContext||window.webkitAudioContext)();
  masterGain = actx.createGain();
  masterGain.gain.value = 0.9;
  masterGain.connect(actx.destination);
}
function tone(freq=528, dur=0.9, type='sine', gain=0.08){
  ensureAudio();
  const o = actx.createOscillator(), g = actx.createGain();
  o.type = type; o.frequency.value = freq;
  g.gain.value = 0; g.gain.linearRampToValueAtTime(gain, actx.currentTime+0.02);
  g.gain.linearRampToValueAtTime(0.0001, actx.currentTime+dur);
  o.connect(g).connect(masterGain); o.start(); o.stop(actx.currentTime+dur+0.02);
}
function padChord(base=174, dur=2.5, gain=0.025){
  ensureAudio();
  const freqs = [1, 5/4, 3/2].map(r => base*r); // simple just intonation triad
  freqs.forEach((f,i)=>{
    const o=actx.createOscillator(), g=actx.createGain();
    o.type='sine'; o.frequency.value=f;
    g.gain.value=0;
    g.gain.linearRampToValueAtTime(gain, actx.currentTime+0.15+i*0.02);
    g.gain.linearRampToValueAtTime(0.0001, actx.currentTime+dur);
    o.connect(g).connect(masterGain); o.start(); o.stop(actx.currentTime+dur+0.1);
  });
}

/* ======= DOM ======= */
const $cd = document.getElementById('countdown');
const $instr = document.getElementById('instructionsText');
const $meta = document.getElementById('metatron');
const $spirals = document.getElementById('spirals');
const $flower = document.getElementById('flower');
const $sacred = document.getElementById('sacredGeo');

/* ======= Sacred Geometry Builders ======= */
function clearNode(n){ while(n.firstChild) n.removeChild(n.firstChild); }

function drawMetatronLayers(layers=0, p=0){
  clearNode($meta);
  // radius scales up slightly with p for drama
  const baseR = Math.min(innerWidth, innerHeight)*0.18*(1+0.2*p);
  for(let L=1; L<=layers; L++){
    const g = document.createElementNS('http://www.w3.org/2000/svg','g');
    // color ramps bolder as T→0
    const hue = (260 + 60*L + 120*p) % 360;
    const sat = 40 + 50*p;
    const lit = 50 + 15*p;
    g.setAttribute('stroke', `hsl(${hue}, ${sat}%, ${lit}%)`);
    g.setAttribute('opacity', 0.35 + 0.45*p);

    // 6-fold star points (hexagon)
    const r = baseR * (0.65 + 0.12*L);
    const pts = [...Array(6)].map((_,i)=>({
      x: Math.cos(i*Math.PI/3)*r,
      y: Math.sin(i*Math.PI/3)*r
    }));
    // center node
    circle(0,0, r*0.04, g);
    // outer nodes + lines to center
    pts.forEach(pt=>{
      circle(pt.x, pt.y, r*0.035, g);
      line(0,0, pt.x, pt.y, g);
    });
    // connect outer hexagon
    pts.forEach((pt,i)=>{
      const n = pts[(i+1)%6];
      line(pt.x, pt.y, n.x, n.y, g);
    });
    // inner star lines (Metatron cube style: connect every pair)
    for(let i=0;i<6;i++){
      for(let j=i+2;j<6;j++){
        if(Math.abs(j-i)===3) continue; // skip opposite for cleanliness
        line(pts[i].x, pts[i].y, pts[j].x, pts[j].y, g);
      }
    }
    $meta.appendChild(g);
  }
}
function drawPhiSpirals(count=6, p=0){
  clearNode($spirals);
  const gAll = document.createElementNS('http://www.w3.org/2000/svg','g');
  const scale = Math.min(innerWidth, innerHeight)*0.45*(1-0.15*p);
  for(let k=0;k<count;k++){
    const g = document.createElementNS('http://www.w3.org/2000/svg','path');
    const hue = (300 + 18*k + 220*p) % 360;
    const sat = 45 + 45*p;
    const lit = 48 + 12*p;
    g.setAttribute('stroke', `hsl(${hue}, ${sat}%, ${lit}%)`);
    g.setAttribute('fill','none');
    g.setAttribute('opacity', 0.20 + 0.35*p);
    g.setAttribute('stroke-width', 0.8 + 2.2*p);

    // logarithmic spiral (approx φ-spiral)
    const turns = 1.2 + 0.9*p;                  // tighter as T→0
    const a = 0.12, b = 0.23 + 0.15*p;         // growth rate
    let d = '';
    const steps = 400;
    const phase = (k/ count) * Math.PI*2;
    for(let i=0;i<=steps;i++){
      const t = i/steps * 2*Math.PI*turns + phase;
      const r = scale * a * Math.exp(b*t);
      const x = r*Math.cos(t), y = r*Math.sin(t);
      d += (i? 'L':'M') + x + ' ' + y + ' ';
    }
    g.setAttribute('d', d);
    gAll.appendChild(g);
  }
  $spirals.appendChild(gAll);
}
function drawFlowerOfLife(p=0){
  clearNode($flower);
  const g = document.createElementNS('http://www.w3.org/2000/svg','g');
  const r = Math.min(innerWidth, innerHeight)*0.09*(1+0.25*p);
  const hue = (200 + 120*p) % 360, sat = 35 + 40*p, lit = 50 + 10*p;
  g.setAttribute('stroke', `hsl(${hue}, ${sat}%, ${lit}%)`);
  g.setAttribute('opacity', 0.15 + 0.35*p);
  const coords = [[0,0]];
  const dirs = [...Array(6)].map((_,i)=>[Math.cos(i*Math.PI/3), Math.sin(i*Math.PI/3)]);
  dirs.forEach(([dx,dy])=>coords.push([r*dx*2, r*dy*2]));
  // central 7‑circle seed
  circle(0,0,r,g);
  coords.slice(1).forEach(([x,y])=>circle(x,y,r,g));
  $flower.appendChild(g);
}
/* helpers */
function svgEl(tag){ return document.createElementNS('http://www.w3.org/2000/svg', tag); }
function line(x1,y1,x2,y2, parent){
  const el = svgEl('line');
  el.setAttribute('x1',x1); el.setAttribute('y1',y1);
  el.setAttribute('x2',x2); el.setAttribute('y2',y2);
  parent.appendChild(el);
}
function circle(cx,cy,r,parent){
  const el = svgEl('circle');
  el.setAttribute('cx',cx); el.setAttribute('cy',cy); el.setAttribute('r',r);
  parent.appendChild(el);
}

/* ======= Instructions ======= */
function updateInstructions(msTo){
  if (msTo > FIVE){
    $instr.textContent = 'Sacred geometry forming… attune your awareness.';
  } else if (msTo <= FIVE && msTo > MIN){
    $instr.textContent = 'Five‑minute convergence window active — breathe evenly, feel the spiral tighten.';
  } else if (msTo <= MIN && msTo > 0){
    $instr.textContent = 'T−1: final alignment — hold the AMARANTU’EL✹Star at center.';
  } else if (msTo <= 0 && msTo > -MIN){
    $instr.textContent = 'T₀ Pulse — radiate your intent; remain steady in the wave.';
  } else if (msTo <= -MIN){
    $instr.textContent = 'Sustain & settle — let the field stabilize; carry the resonance outward.';
  }
}

/* ======= Main Tick ======= */
function tick(){
  const now = new Date();
  const msTo = target - now;

  // progress 0..1 across last 5 minutes (clamped)
  const p = Math.max(0, Math.min(1, (FIVE - Math.max(0, msTo))/FIVE));

  // minute‑by‑minute chimes in last 5 min + ambient pad each minute
  const minutesTo = Math.ceil(msTo / MIN);
  if (msTo <= FIVE && msTo >= 0) {
    if (minutesTo !== lastMinuteMark && msTo > 0){
      lastMinuteMark = minutesTo;
      // ascending chime as we approach T₀
      const idx = Math.max(0, Math.min(5, 5 - minutesTo)); // 0..4
      const chimes = [528, 594, 660, 741, 852]; // gentle ascent
      tone(chimes[idx], 0.9, 'sine', 0.09);
      padChord(174 + 22*idx, 2.7, 0.02); // soft harmonic bed
    }
  }
  // distinct T₀ strike
  if (msTo <= 250 && msTo > -250){
    tone(963, 1.3, 'sine', 0.12); // crown note
    padChord(285, 3.2, 0.03);
  }

  // sacred geometry: layers/density/color weight with p
  const layers = (msTo > FIVE) ? 0 : Math.max(0, Math.min(5, 5 - Math.ceil(msTo/MIN))); // new layer each minute
  drawMetatronLayers(layers, p);
  const spiralCount = 4 + Math.floor(p*10); // 4 → 14 spirals as T→0
  drawPhiSpirals(spiralCount, p);
  drawFlowerOfLife(p);

  // global intensity & thickness ramp
  $sacred.setAttribute('opacity', 0.25 + 0.55*p);
  $sacred.setAttribute('stroke-width', (1.0 + 2.0*p).toFixed(2));

  // instructions + countdown
  updateInstructions(msTo);
  const sign = msTo >= 0 ? '-' : '+';
  const t = Math.abs(msTo);
  const h = pad(Math.floor(t/3600000));
  const m = pad(Math.floor((t%3600000)/60000));
  const s = pad(Math.floor((t%60000)/1000));
  $cd.textContent = `${sign}${h}:${m}:${s}`;

  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);

/* wake audio on first user gesture */
window.addEventListener('pointerdown', ensureAudio, { once:true });
window.addEventListener('keydown', ensureAudio, { once:true });
</script>

</body>
</html>
